{% extends 'layout.html' %}
{% block body %}
{% from "Includes/_formhelpers.html" import render_field %}
<div class="row">

    {% if session.logged_in %}
    <div class="col-4">
        <div class="card position-fixed p-2 mt-5">
            <div class="container text-center">
                <h1>
                    Welcome, {{session.name}}!!
                </h1>
                <p class="text-muted">Email: {{session.email}} </p>


                <form method='POST' action="/add">
                    <div class="form.group">
                        {{render_field(form.url, class_="form-control")}}
                    </div>


                    <p><input type="submit" class="btn btn-success" value="ADD"></p>
                </form>
            </div>
        </div>

    </div>

    {% endif %}

    <div class="mt-5 col-8">
        <div class="container text-center">

            <div class="row text-muted p-1">
                <div class="col-2">Product Image</div>
                <div class="col-6">Product Name</div>
                <div class="col-2">Current Price</div>
                <div class="col-1 text-center">View</div>
                <div class="col-1">Delete</div>
            </div>

            <hr>

            {% for link in links %}
            <div class="row p-1">
                <div><img src="{{link['image_url']}}" height=120 width=120 /></div>

                <div class="col-6">{{link['product']}}</div>
                <div class="col-2">{{link['price']}}</div>
                <div class="col-1"><a href="{{link['url']}}" class="btn btn-primary">View</a> </div>
                <div class="col-1">
                    <form action="/delete/{{link['id']}}" method="POST">
                        <input type='submit' value="Delete" class="btn btn-danger">
                    </form>
                </div>
                <hr>
            </div>
            {% endfor %}

        </div>
    </div>
</div>

{% endblock %}